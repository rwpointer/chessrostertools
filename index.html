<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SwissSys Pairing Slip Generator</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=DM+Sans:wght@400;500;600&display=swap');

  :root {
    --ink: #1a1208;
    --cream: #f5f0e8;
    --parchment: #ede6d6;
    --gold: #c8912a;
    --gold-light: #e8b84b;
    --board-dark: #4a3728;
    --board-medium: #7a5c44;
    --green: #2d5a27;
    --red: #8b2020;
    --rule: #c8b89a;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--cream);
    color: var(--ink);
    font-family: 'DM Sans', sans-serif;
    min-height: 100vh;
  }

  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: repeating-conic-gradient(var(--parchment) 0% 25%, transparent 0% 50%);
    background-size: 40px 40px;
    opacity: 0.4;
    z-index: 0;
    pointer-events: none;
  }

  .wrapper {
    position: relative;
    z-index: 1;
    max-width: 900px;
    margin: 0 auto;
    padding: 40px 24px 60px;
  }

  header { text-align: center; margin-bottom: 36px; }
  .chess-icon { font-size: 44px; line-height: 1; margin-bottom: 10px; display: block; }
  h1 {
    font-family: 'Playfair Display', serif;
    font-size: clamp(26px, 4.5vw, 40px);
    font-weight: 900;
    color: var(--board-dark);
  }
  h1 span { color: var(--gold); }
  .subtitle { margin-top: 8px; color: var(--board-medium); font-size: 14px; font-weight: 500; }
  .rule-line { width: 100%; height: 2px; background: linear-gradient(to right, transparent, var(--gold), transparent); margin: 20px 0; }

  .card {
    background: white;
    border: 1px solid var(--rule);
    border-radius: 4px;
    padding: 24px 28px;
    margin-bottom: 18px;
    box-shadow: 0 2px 10px rgba(74,55,40,0.07);
  }

  .card-title {
    font-family: 'Playfair Display', serif;
    font-size: 16px;
    font-weight: 700;
    color: var(--board-dark);
    margin-bottom: 14px;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .step-badge {
    background: var(--gold);
    color: white;
    font-family: 'DM Sans', sans-serif;
    font-size: 11px;
    font-weight: 700;
    width: 22px; height: 22px;
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    flex-shrink: 0;
  }

  .drop-zone {
    border: 2px dashed var(--rule);
    border-radius: 4px;
    padding: 36px 20px;
    text-align: center;
    cursor: pointer;
    transition: all 0.2s;
    background: var(--cream);
  }
  .drop-zone:hover, .drop-zone.drag-over { border-color: var(--gold); background: #fdf8ef; }
  .drop-zone input { display: none; }
  .drop-icon { font-size: 32px; margin-bottom: 8px; display: block; }
  .drop-label { font-weight: 600; color: var(--board-dark); font-size: 14px; }
  .drop-sub { color: var(--board-medium); font-size: 12px; margin-top: 3px; }

  .file-info {
    display: none;
    align-items: center;
    gap: 10px;
    padding: 12px 16px;
    background: #f0f7ef;
    border: 1px solid #b8d4b5;
    border-radius: 4px;
    margin-top: 10px;
  }
  .file-info.visible { display: flex; }
  .file-info .fn { font-weight: 600; font-size: 13px; color: var(--green); }

  .section-list { display: flex; flex-direction: column; gap: 8px; }
  .section-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    border: 1px solid var(--rule);
    border-radius: 4px;
    background: var(--cream);
    cursor: pointer;
    transition: all 0.15s;
  }
  .section-item:hover { border-color: var(--gold); background: #fdf8ef; }
  .section-item input[type=checkbox] { width: 16px; height: 16px; accent-color: var(--gold); cursor: pointer; }
  .section-item label { cursor: pointer; flex: 1; }
  .sec-name { font-weight: 600; color: var(--board-dark); font-size: 14px; }
  .sec-meta { font-size: 12px; color: var(--board-medium); margin-top: 2px; }
  .sec-badge { background: var(--board-dark); color: white; font-size: 11px; font-weight: 700; padding: 3px 8px; border-radius: 10px; }

  .settings-row { display: flex; gap: 16px; flex-wrap: wrap; }
  .field { flex: 1; min-width: 140px; }
  .field label { display: block; font-size: 12px; font-weight: 700; color: var(--board-medium); margin-bottom: 5px; text-transform: uppercase; letter-spacing: 0.5px; }
  .field input, .field select {
    width: 100%; padding: 9px 12px;
    border: 1px solid var(--rule); border-radius: 3px;
    font-family: 'DM Sans', sans-serif; font-size: 13px;
    background: var(--cream); color: var(--ink);
    transition: border-color 0.15s;
  }
  .field input:focus, .field select:focus { outline: none; border-color: var(--gold); }

  .btn-row { display: flex; gap: 10px; flex-wrap: wrap; }
  .btn {
    padding: 11px 24px;
    border: none; border-radius: 3px;
    font-family: 'DM Sans', sans-serif; font-size: 14px; font-weight: 600;
    cursor: pointer; transition: all 0.15s;
    display: flex; align-items: center; gap: 7px;
  }
  .btn:disabled { background: #ccc !important; cursor: not-allowed; transform: none !important; box-shadow: none !important; }
  .btn-dark { background: var(--board-dark); color: white; }
  .btn-dark:hover:not(:disabled) { background: var(--board-medium); transform: translateY(-1px); box-shadow: 0 4px 10px rgba(74,55,40,0.25); }
  .btn-gold { background: var(--gold); color: white; }
  .btn-gold:hover:not(:disabled) { background: var(--gold-light); transform: translateY(-1px); box-shadow: 0 4px 10px rgba(200,145,42,0.3); }

  .status {
    padding: 10px 14px; border-radius: 3px; font-size: 13px; font-weight: 500;
    margin-top: 12px; display: none;
  }
  .status.ok { background: #f0f7ef; border: 1px solid #b8d4b5; color: var(--green); display: block; }
  .status.err { background: #fdf0f0; border: 1px solid #e8b5b5; color: var(--red); display: block; }

  /* â”€â”€ PRINT PREVIEW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  #printArea {
    display: none;
    background: #777;
    border-radius: 4px;
    margin-top: 18px;
    padding: 24px;
  }

  #printArea h3 {
    font-family: 'Playfair Display', serif;
    font-size: 13px;
    color: white;
    margin-bottom: 16px;
    text-align: center;
    letter-spacing: 1px;
    text-transform: uppercase;
  }

  /* â”€â”€ PRINT PAGE: exact 8.5Ã—11 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .print-page {
    width: 8.5in;
    height: 11in;
    background: white;
    margin: 0 auto 24px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    box-shadow: 0 4px 24px rgba(0,0,0,0.4);
  }

  /* â”€â”€ SLIP: 1/5 of page = 2.2in tall â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .slip {
    width: 100%;
    height: 2.2in;
    flex-shrink: 0;
    display: flex;
    flex-direction: row;
    border-bottom: 1.5px dashed #bbb;
    overflow: hidden;
  }
  .slip:last-child { border-bottom: none; }

  /* â”€ WHITE side (left) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .slip-white {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: 0.14in 0.18in 0.14in 0.20in;
    border-right: 1px solid #e0e0e0;
    background: #fafafa;
  }

  /* â”€ CENTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .slip-center {
    width: 1.85in;
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-between;
    padding: 0.12in 0.10in 0.14in;
    border-right: 1px solid #e0e0e0;
    background: white;
    text-align: center;
  }

  /* â”€ BLACK side (right) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .slip-black {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: 0.14in 0.20in 0.14in 0.18in;
    background: #fafafa;
  }

  /* Player info */
  .player-top { display: flex; flex-direction: column; gap: 4px; }

  .player-color-label {
    font-size: 7pt;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    color: #999;
  }

  .player-name {
    font-size: 13.5pt;
    font-weight: 700;
    color: #1a1208;
    line-height: 1.15;
    word-break: break-word;
  }

  .player-meta {
    font-size: 8pt;
    color: #777;
    margin-top: 1px;
  }

  .player-meta strong { font-weight: 700; color: #555; }

  /* Signature */
  .player-sig { display: flex; flex-direction: column; gap: 4px; }
  .sig-label { font-size: 7pt; color: #bbb; text-transform: uppercase; letter-spacing: 0.8px; }
  .sig-line { border-bottom: 1px solid #bbb; width: 100%; height: 18px; }

  /* Center: board + section info */
  .center-top { display: flex; flex-direction: column; align-items: center; gap: 2px; }

  .board-label {
    font-size: 7pt;
    text-transform: uppercase;
    letter-spacing: 1.2px;
    color: #aaa;
    font-weight: 700;
  }

  .board-number {
    font-family: 'Playfair Display', serif;
    font-size: 26pt;
    font-weight: 900;
    color: #1a1208;
    line-height: 1;
  }

  .center-section {
    font-size: 6.5pt;
    color: #888;
    font-weight: 600;
    line-height: 1.4;
    padding: 0 4px;
    margin-top: 2px;
  }

  /* Result */
  .result-area { display: flex; flex-direction: column; align-items: center; gap: 5px; width: 100%; }
  .result-label { font-size: 6.5pt; text-transform: uppercase; letter-spacing: 0.8px; color: #bbb; font-weight: 700; }

  .result-options { display: flex; flex-direction: column; gap: 5px; width: 100%; align-items: flex-start; padding: 0 0.1in; }

  .result-option {
    display: flex;
    align-items: center;
    gap: 7px;
  }

  .result-circle {
    width: 20px;
    height: 20px;
    border: 1.5px solid #999;
    border-radius: 50%;
    flex-shrink: 0;
  }

  .result-text {
    font-size: 9pt;
    font-weight: 700;
    color: #333;
  }

  .result-sub {
    font-size: 6.5pt;
    color: #bbb;
    margin-left: 2px;
  }

  /* Bye */
  .slip-bye-msg {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    font-size: 10pt;
    color: #bbb;
    font-style: italic;
    letter-spacing: 1px;
  }

  footer {
    text-align: center;
    color: var(--board-medium);
    font-size: 11px;
    margin-top: 36px;
    padding-top: 16px;
    border-top: 1px solid var(--rule);
  }

  /* â”€â”€ PRINT MEDIA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  @media print {
    @page { size: 8.5in 11in; margin: 0; }

    body { background: white; }
    body::before { display: none !important; }
    .wrapper { display: none !important; }

    #printArea {
      display: block !important;
      background: none !important;
      padding: 0 !important;
      margin: 0 !important;
    }

    #printArea h3 { display: none !important; }

    .print-page {
      width: 8.5in;
      height: 11in;
      margin: 0;
      padding: 0;
      page-break-after: always;
      box-shadow: none;
    }

    .print-page:last-child { page-break-after: avoid; }
  }
</style>
</head>
<body>

<div class="wrapper">
  <header>
    <span class="chess-icon">â™Ÿ</span>
    <h1>Pairing Slip <span>Generator</span></h1>
    <p class="subtitle">SwissSys Â· ChessRoster Â· Saint Louis Chess Club</p>
  </header>

  <div class="rule-line"></div>

  <!-- STEP 1 -->
  <div class="card">
    <div class="card-title"><span class="step-badge">1</span>Load Pairings File</div>
    <div class="drop-zone" id="dropZone">
      <input type="file" id="fileInput" accept=".txt,.prn,.lis,text/*">
      <span class="drop-icon">ðŸ“„</span>
      <div class="drop-label">Click to browse or drag &amp; drop</div>
      <div class="drop-sub">SwissSys / ChessRoster pairings .txt file</div>
    </div>
    <div class="file-info" id="fileInfo">
      <span>âœ…</span>
      <span class="fn" id="fileName">â€”</span>
    </div>
  </div>

  <!-- STEP 2 -->
  <div class="card">
    <div class="card-title"><span class="step-badge">2</span>Select Sections to Print</div>
    <div id="sectionList"><p style="color:#bbb;font-size:13px;">Load a file to see sections.</p></div>
    <div class="status" id="parseStatus"></div>
  </div>

  <!-- STEP 3 -->
  <div class="card">
    <div class="card-title"><span class="step-badge">3</span>Options</div>
    <div class="settings-row">
      <div class="field">
        <label>Slips Per Page</label>
        <select id="slipsPerPage">
          <option value="5" selected>5 (fills 8.5Ã—11)</option>
          <option value="4">4</option>
          <option value="3">3</option>
        </select>
      </div>
      <div class="field">
        <label>Tournament Name Override</label>
        <input type="text" id="tourneyName" placeholder="(auto-detected)">
      </div>
      <div class="field">
        <label>Round Override</label>
        <input type="text" id="roundOverride" placeholder="(auto-detected)">
      </div>
    </div>
  </div>

  <!-- STEP 4 -->
  <div class="card">
    <div class="card-title"><span class="step-badge">4</span>Generate &amp; Print</div>
    <div class="btn-row">
      <button class="btn btn-dark" id="btnGenerate" onclick="generateSlips()" disabled>âš™ Generate Slips</button>
      <button class="btn btn-gold" id="btnPrint" onclick="window.print()" disabled>ðŸ–¨ Print</button>
    </div>
    <div class="status" id="genStatus"></div>
  </div>

  <footer>Saint Louis Chess Club Â· Pairing Slip Generator Â· Built for SwissSys / ChessRoster</footer>
</div>

<!-- PRINT AREA â€” lives outside .wrapper so it prints alone -->
<div id="printArea">
  <h3>â–¼ Print Preview â€” <span id="previewLabel"></span></h3>
  <div id="pages"></div>
</div>

<script>
let parsedSections = [];

// â”€â”€ File loading â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const dropZone  = document.getElementById('dropZone');
const fileInput = document.getElementById('fileInput');

dropZone.addEventListener('click', () => fileInput.click());
dropZone.addEventListener('dragover', e => { e.preventDefault(); dropZone.classList.add('drag-over'); });
dropZone.addEventListener('dragleave', () => dropZone.classList.remove('drag-over'));
dropZone.addEventListener('drop', e => {
  e.preventDefault(); dropZone.classList.remove('drag-over');
  if (e.dataTransfer.files[0]) loadFile(e.dataTransfer.files[0]);
});
fileInput.addEventListener('change', () => { if (fileInput.files[0]) loadFile(fileInput.files[0]); });

function loadFile(file) {
  const reader = new FileReader();
  reader.onload = e => {
    document.getElementById('fileName').textContent = file.name;
    document.getElementById('fileInfo').classList.add('visible');
    parseFile(e.target.result);
  };
  reader.readAsText(file, 'latin1');
}

// â”€â”€ Parsing â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function parseFile(content) {
  parsedSections = [];
  const lines = content.split(/\r?\n/);
  let cur = null;

  const extractScore = str => {
    const m = str.match(/\(([0-9.Â½]+)\)\s*$/);
    return m
      ? { name: str.replace(/\s*\([0-9.Â½]+\)\s*$/, '').trim(), score: m[1] }
      : { name: str.trim(), score: '' };
  };

  for (const line of lines) {
    const hdr = line.match(/^Pairings for (Round \d+)\.\s*(.+)$/i);
    if (hdr) {
      if (cur) parsedSections.push(cur);
      cur = { round: hdr[1], name: hdr[2].trim(), pairings: [], byes: [] };
      continue;
    }
    if (!cur || line.match(/^Bd\s+Team\s+Res/) || !line.trim()) continue;

    const parts = line.split('\t');
    const bdM = parts[0].trim().match(/^(\d+)$/);
    if (bdM) {
      const w = extractScore((parts[3] || '').trim());
      const b = extractScore((parts[6] || '').trim());
      cur.pairings.push({
        bd: parseInt(bdM[1]),
        white: { team: (parts[1]||'').trim(), name: w.name, score: w.score },
        black: { team: (parts[4]||'').trim(), name: b.name, score: b.score }
      });
    } else if (parts[0].trim() === '' && line.includes('BYE')) {
      const p = extractScore((parts[3]||'').trim());
      if ((parts[1]||'').trim() || p.name)
        cur.byes.push({ team: (parts[1]||'').trim(), name: p.name, score: p.score });
    }
  }
  if (cur) parsedSections.push(cur);
  renderSectionList();
}

function renderSectionList() {
  const container = document.getElementById('sectionList');
  if (!parsedSections.length) {
    container.innerHTML = '<p style="color:#c00;font-size:13px;">No sections found. Check file format.</p>';
    return;
  }
  container.innerHTML = '';
  const list = document.createElement('div');
  list.className = 'section-list';
  parsedSections.forEach((sec, i) => {
    const item = document.createElement('div');
    item.className = 'section-item';
    item.innerHTML = `
      <input type="checkbox" id="sec_${i}" checked>
      <label for="sec_${i}">
        <div class="sec-name">${sec.name}</div>
        <div class="sec-meta">${sec.round} Â· ${sec.pairings.length} boards${sec.byes.length ? ` Â· ${sec.byes.length} bye(s)` : ''}</div>
      </label>
      <span class="sec-badge">${sec.pairings.length}</span>
    `;
    list.appendChild(item);
  });
  container.appendChild(list);
  const total = parsedSections.reduce((s, sec) => s + sec.pairings.length, 0);
  setStatus('parseStatus', 'ok', `âœ“ Found ${parsedSections.length} section(s) â€” ${total} total boards.`);
  document.getElementById('btnGenerate').disabled = false;
}

// â”€â”€ Generate & reorder â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function generateSlips() {
  const slipsPerPage  = parseInt(document.getElementById('slipsPerPage').value);
  const tourneyOver   = document.getElementById('tourneyName').value.trim();
  const roundOver     = document.getElementById('roundOverride').value.trim();

  const selected = parsedSections.filter((_, i) => document.getElementById(`sec_${i}`)?.checked);
  if (!selected.length) { setStatus('genStatus', 'err', 'Please select at least one section.'); return; }

  const allSlips = [];
  selected.forEach(sec => {
    sec.pairings.forEach(p => {
      allSlips.push({ sec: sec.name, round: roundOver || sec.round, tourney: tourneyOver || sec.name, pairing: p });
    });
  });

  const numSlips = allSlips.length;
  const numPages = Math.ceil(numSlips / slipsPerPage);

  // Transpose reorder so stacking = consecutive boards
  const pages = [];
  for (let k = 0; k < numPages; k++) {
    const pg = [];
    for (let row = 0; row < slipsPerPage; row++) {
      const idx = k + row * numPages;
      if (idx < numSlips) pg.push(allSlips[idx]);
    }
    pages.push(pg);
  }

  renderPages(pages, slipsPerPage, numSlips, numPages);
  setStatus('genStatus', 'ok', `âœ“ Generated ${numSlips} slips across ${numPages} pages. Ready to print.`);
  document.getElementById('btnPrint').disabled = false;
}

function renderPages(pages, slipsPerPage, totalSlips, totalPages) {
  const pagesDiv = document.getElementById('pages');
  pagesDiv.innerHTML = '';
  document.getElementById('previewLabel').textContent =
    `${totalSlips} slips Â· ${totalPages} pages Â· ${slipsPerPage} per page`;

  const slipH = (11 / slipsPerPage).toFixed(4) + 'in';

  pages.forEach(pageSlips => {
    const pageDiv = document.createElement('div');
    pageDiv.className = 'print-page';
    pageSlips.forEach(slip => pageDiv.appendChild(renderSlip(slip, slipH)));
    pagesDiv.appendChild(pageDiv);
  });

  const printArea = document.getElementById('printArea');
  printArea.style.display = 'block';
  printArea.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

function renderSlip(slip, slipH) {
  const p = slip.pairing;
  const secShort = slip.sec.replace(/^.+?:\s*/, '');

  const div = document.createElement('div');
  div.className = 'slip';
  div.style.height = slipH;

  const isBye = !p.black.name;

  const wMeta = [p.white.team, p.white.score ? `Score: ${p.white.score}` : ''].filter(Boolean).join(' Â· ');
  const bMeta = [p.black.team, p.black.score ? `Score: ${p.black.score}` : ''].filter(Boolean).join(' Â· ');

  div.innerHTML = `
    <!-- â”€â”€ WHITE (left) â”€â”€ -->
    <div class="slip-white">
      <div class="player-top">
        <div class="player-color-label">â¬œ White</div>
        <div class="player-name">${p.white.name || 'â€”'}</div>
        ${wMeta ? `<div class="player-meta">${wMeta}</div>` : ''}
      </div>
      <div class="player-sig">
        <div class="sig-label">Signature</div>
        <div class="sig-line"></div>
      </div>
    </div>

    <!-- â”€â”€ CENTER â”€â”€ -->
    <div class="slip-center">
      <div class="center-top">
        <div class="board-label">Board</div>
        <div class="board-number">${p.bd}</div>
        <div class="center-section">${slip.round}<br>${secShort}</div>
      </div>

      <div class="result-area">
        <div class="result-label">Circle Result</div>
        <div class="result-options">
          <div class="result-option">
            <div class="result-circle"></div>
            <span class="result-text">1 â€“ 0</span>
            <span class="result-sub">White wins</span>
          </div>
          <div class="result-option">
            <div class="result-circle"></div>
            <span class="result-text">Â½ â€“ Â½</span>
            <span class="result-sub">Draw</span>
          </div>
          <div class="result-option">
            <div class="result-circle"></div>
            <span class="result-text">0 â€“ 1</span>
            <span class="result-sub">Black wins</span>
          </div>
        </div>
      </div>
    </div>

    <!-- â”€â”€ BLACK (right) â”€â”€ -->
    <div class="slip-black">
      ${isBye
        ? '<div class="slip-bye-msg">â€” BYE â€”</div>'
        : `<div class="player-top">
            <div class="player-color-label">â¬› Black</div>
            <div class="player-name">${p.black.name}</div>
            ${bMeta ? `<div class="player-meta">${bMeta}</div>` : ''}
           </div>
           <div class="player-sig">
             <div class="sig-label">Signature</div>
             <div class="sig-line"></div>
           </div>`
      }
    </div>
  `;

  return div;
}

function setStatus(id, type, msg) {
  const el = document.getElementById(id);
  el.className = 'status ' + type;
  el.textContent = msg;
}
</script>
</body>
</html>
